webpackJsonp([1],{"+MCL":function(e,t){},0:function(e,t){},"1BAM":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b",[n("span",[e._v(e._s(e.item.name))])]),e._v(" "),n("abbr",[e._v(e._s(e.item.directions))])])},s=[],i={render:a,staticRenderFns:s};t.a=i},"310s":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement;return(e._self._c||t)("v-autocomplete",{attrs:{items:e.linesAutocomplete,"get-label":e.getLabel,"component-item":e.template,"min-len":1,placeholder:e.value.name.toString()},on:{"update-items":e.updateAutocomplete,"item-selected":e.itemSelected},model:{value:e.item,callback:function(t){e.item=t},expression:"item"}})},s=[],i={render:a,staticRenderFns:s};t.a=i},"3OrN":function(e,t){},"3waJ":function(e,t){},"8e5L":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"panel panel-default"},[n("div",{staticClass:"panel-body"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-xs-10"},[n("div",{staticClass:"col-xs-12"},[n("autocomplete",{on:{update:e.updated},model:{value:e.ligneCopy,callback:function(t){e.ligneCopy=t},expression:"ligneCopy"}})],1),e._v(" "),n("div",{staticClass:"col-xs-12 slider"},[n("vue-slider",{attrs:{data:e.intervals},model:{value:e.intervalCopy,callback:function(t){e.intervalCopy=t},expression:"intervalCopy"}})],1),e._v(" "),n("div",{staticClass:"col-xs-12 days"},[n("switches",{attrs:{label:"Tous les jours",theme:"custom",color:"green"},model:{value:e.everyDay,callback:function(t){e.everyDay=t},expression:"everyDay"}}),e._v(" "),n("switches",{attrs:{label:"Du lundi au vendredi",theme:"custom",color:"green"},model:{value:e.exceptWeekEnd,callback:function(t){e.exceptWeekEnd=t},expression:"exceptWeekEnd"}}),e._v(" "),n("switches",{attrs:{label:"lundi",theme:"custom",color:"blue"},model:{value:e.daysCopy[0],callback:function(t){e.$set(e.daysCopy,0,t)},expression:"daysCopy[0]"}}),e._v(" "),n("switches",{attrs:{label:"mardi",theme:"custom",color:"blue"},model:{value:e.daysCopy[1],callback:function(t){e.$set(e.daysCopy,1,t)},expression:"daysCopy[1]"}}),e._v(" "),n("switches",{attrs:{label:"mercredi",theme:"custom",color:"blue"},model:{value:e.daysCopy[2],callback:function(t){e.$set(e.daysCopy,2,t)},expression:"daysCopy[2]"}}),e._v(" "),n("switches",{attrs:{label:"jeudi",theme:"custom",color:"blue"},model:{value:e.daysCopy[3],callback:function(t){e.$set(e.daysCopy,3,t)},expression:"daysCopy[3]"}}),e._v(" "),n("switches",{attrs:{label:"vendredi",theme:"custom",color:"blue"},model:{value:e.daysCopy[4],callback:function(t){e.$set(e.daysCopy,4,t)},expression:"daysCopy[4]"}}),e._v(" "),n("switches",{attrs:{label:"samedi",theme:"custom",color:"blue"},model:{value:e.daysCopy[5],callback:function(t){e.$set(e.daysCopy,5,t)},expression:"daysCopy[5]"}}),e._v(" "),n("switches",{attrs:{label:"dimanche",theme:"custom",color:"blue"},model:{value:e.daysCopy[6],callback:function(t){e.$set(e.daysCopy,6,t)},expression:"daysCopy[6]"}})],1)]),e._v(" "),n("div",{staticClass:"col-xs-2"},[n("div",{staticClass:"aligner"},[e.saved&&e.isValid?n("button",{staticClass:"btn btn-danger aligner-item",attrs:{type:"button"},on:{click:function(t){e.remove()}}},[n("span",{staticClass:"glyphicon glyphicon-remove"}),e._v("\n            Supprimer\n          ")]):e._e(),e._v(" "),!e.saved&&e.isValid?n("button",{staticClass:"btn btn-success aligner-item",attrs:{type:"button"},on:{click:function(t){e.updateStore(e.daysCopy,e.intervalCopy,e.ligneCopy,e.index)}}},[n("span",{staticClass:"glyphicon glyphicon-saved"}),e._v(" Enregistrer\n          ")]):e._e()])])])])])},s=[],i={render:a,staticRenderFns:s};t.a=i},"9Din":function(e,t){},"A+JM":function(e,t,n){"use strict";var a=n("bOdI"),s=n.n(a);t.a={name:"switches",props:{typeBold:{default:!1},value:{default:!1},disabled:{default:!1},label:{default:""},textEnabled:{default:""},textDisabled:{default:""},color:{default:"default"},theme:{default:"default"},emitOnMount:{default:!0}},mounted:function(){this.emitOnMount&&this.$emit("input",this.value)},methods:{trigger:function(e){this.$emit("input",e.target.checked)}},computed:{classObject:function(){var e,t=this.color,n=this.value,a=this.theme,i=this.typeBold,r=this.disabled;return e={"vue-switcher":!0},s()(e,"vue-switcher--unchecked",!n),s()(e,"vue-switcher--disabled",r),s()(e,"vue-switcher--bold",i),s()(e,"vue-switcher--bold--unchecked",i&&!n),s()(e,"vue-switcher-theme--"+a,t),s()(e,"vue-switcher-color--"+t,t),e},shouldShowLabel:function(){return""!==this.label||""!==this.textEnabled||""!==this.textDisabled}}}},AJqI:function(e,t,n){"use strict";var a=n("wQ0S"),s=n("e0jU"),i=n("VU/8"),r=i(a.a,s.a,!1,null,null,null);t.a=r.exports},CFsx:function(e,t){},IcnI:function(e,t,n){"use strict";function a(e,t){o.a.has(e,"ids")?u.a.post("/updatescheduledline",{ids:e.ids,lineName:e.ligne.name,type:e.ligne.type,interval:e.interval,days:[e.days.lun,e.days.mar,e.days.mer,e.days.jeu,e.days.ven,e.days.sam,e.days.dim]},function(e){c.server[t].ids=e.ids}):u.a.post("/addscheduledline",{lineName:e.ligne.name,type:e.ligne.type,interval:e.interval,days:[e.days.lun,e.days.mar,e.days.mer,e.days.jeu,e.days.ven,e.days.sam,e.days.dim]},function(e){return console.log(e)})}var s=n("7+uW"),i=n("NYxO"),r=n("M4fF"),o=n.n(r),l=n("7t+N"),u=n.n(l);s.a.use(i.a);var c={server:function(){u.a.ajaxSetup({async:!1});var e=null;return u.a.get("/getscheduledlines").then(function(t){e=t;var n=[];u.a.get("/lines").then(function(t){t=t.result;for(var a in t)!function(e){t[e].forEach(function(t){t.type=e,n.push(t)})}(a);e=e.map(function(e){return{id:e.lineScheduleId,ligne:o.a.find(n,function(t){return e.line.lineName===t.name}),interval:[e.beginTime.split(":").map(function(e){return(parseInt(e)<10?"0":"")+parseInt(e)}).join(":"),e.endTime.split(":").map(function(e){return(parseInt(e)<10?"0":"")+parseInt(e)}).join(":")],days:e.day}}),e=o.a.flatMap(o.a.values(o.a.groupBy(e,"ligne.name")).map(function(e){return o.a.values(o.a.groupBy(e,"interval"))})),e=e.map(function(e){return e.reduce(function(e,t){return e.ids.push(t.id),e.ligne=t.ligne,e.interval=t.interval,e.days.push(t.days),e},{ids:[],days:[]})}),e.forEach(function(e){e.days={lun:e.days.includes("monday"),mar:e.days.includes("tuesday"),mer:e.days.includes("wednesday"),jeu:e.days.includes("thursday"),ven:e.days.includes("friday"),sam:e.days.includes("saturday"),dim:e.days.includes("sunday")}})},function(e){return console.log(e)})},function(e){return console.log(e)}),e}(),lines:null,fuse:null,intervals:function(){var e=o.a.range(24),t=o.a.range(0,60,10),n=[];return e.forEach(function(e){return t.forEach(function(t){return n.push((e<10?"0":"")+e+":"+(t<10?"0":"")+t)})}),n}()};t.a=new i.a.Store({state:c,strict:!0,mutations:{setLines:function(e,t){e.lines=t},setFuse:function(e,t){e.fuse=t},setServerData:function(e,t){e.server=t},updateStore:function(e,t){isNaN(parseInt(t.ligne.code))||(t.ligne.code=parseInt(t.ligne.code)),isNaN(parseInt(t.ligne.id))||(t.ligne.id=parseInt(t.ligne.id)),e.server[t.index].ligne=t.ligne,e.server[t.index].interval=t.interval,e.server[t.index].days=t.days,a(e.server[t.index],t.index)},setLigneAt:function(e,t){e.server[t.index].ligne=t.ligne},addNewItem:function(e){e.server.push({ligne:{code:0,name:"",directions:"",id:0},interval:["06:00","08:00"],days:{lun:!1,mar:!1,mer:!1,jeu:!1,ven:!1,sam:!1,dim:!1}})},remove:function(e,t){o.a.has(e.server[t.index],"ids")&&u.a.post("/deletescheduledline",{ids:e.server[t.index].ids},function(e){return console.log(e)}),s.a.delete(e.server,t.index)}},getters:{itemByIndex:function(e){return function(t){return e.server[t]}},items:function(e){return e.server},server:function(e){return e.server},size:function(e){return e.server.length},intervals:function(e){return e.intervals},fuse:function(e){return e.fuse}}})},KAQb:function(e,t){},Ku90:function(e,t,n){"use strict";function a(e){n("+MCL"),n("3waJ"),n("KAQb")}var s=n("oUcO"),i=n("8e5L"),r=n("VU/8"),o=a,l=r(s.a,i.a,!1,o,null,null);t.a=l.exports},M93x:function(e,t,n){"use strict";function a(e){n("9Din")}var s=n("xJD8"),i=n("wCnD"),r=n("VU/8"),o=a,l=r(s.a,i.a,!1,o,null,null);t.a=l.exports},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("7+uW"),s=n("M93x"),i=n("YaEn"),r=n("ORbq"),o=n("IcnI");a.a.use(r.a),a.a.http.options.root="http://localhost:5000/",a.a.config.productionTip=!1,new a.a({el:"#app",store:o.a,router:i.a,template:"<App/>",components:{App:s.a}})},XE79:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div")},s=[],i={render:a,staticRenderFns:s};t.a=i},YaEn:function(e,t,n){"use strict";var a=n("7+uW"),s=n("/ocq"),i=n("AJqI"),r=n("tqlH");a.a.use(s.a),t.a=new s.a({routes:[{path:"/",name:"Edit",component:i.a},{path:"/notification",name:"Notification",component:r.a}]})},bWmM:function(e,t,n){"use strict";var a=n("fa0e"),s=n("1BAM"),i=n("VU/8"),r=i(a.a,s.a,!1,null,null,null);t.a=r.exports},e0jU:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{staticClass:"row"},[e._l(e.server,function(e,t){return n("editable",{key:t,attrs:{ligne:e.ligne,days:e.days,interval:e.interval,index:t}})}),e._v(" "),n("button",{staticClass:"btn btn-default btn-block",on:{click:e.newItem}},[n("span",{staticClass:"glyphicon glyphicon-menu-down",attrs:{"aria-hidden":"true"}}),e._v(" Ajouter "),n("span",{staticClass:"glyphicon glyphicon-menu-down",attrs:{"aria-hidden":"true"}})])],2)])},s=[],i={render:a,staticRenderFns:s};t.a=i},fWcQ:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{class:e.classObject},[e.shouldShowLabel?n("span",{staticClass:"vue-switcher__label"},[e.label?n("span",{domProps:{textContent:e._s(e.label)}}):e._e(),e._v(" "),!e.label&&e.value?n("span",{domProps:{textContent:e._s(e.textEnabled)}}):e._e(),e._v(" "),e.label||e.value?e._e():n("span",{domProps:{textContent:e._s(e.textDisabled)}})]):e._e(),e._v(" "),n("input",{attrs:{type:"checkbox",disabled:e.disabled},domProps:{checked:e.value},on:{change:e.trigger}}),e._v(" "),n("div")])},s=[],i={render:a,staticRenderFns:s};t.a=i},fa0e:function(e,t,n){"use strict";t.a={props:{item:{required:!0}}}},lbUa:function(e,t,n){"use strict";function a(e){n("CFsx")}var s=n("mRJh"),i=n("310s"),r=n("VU/8"),o=a,l=r(s.a,i.a,!1,o,null,null);t.a=l.exports},lqen:function(e,t,n){"use strict";function a(e){n("3OrN")}var s=n("A+JM"),i=n("fWcQ"),r=n("VU/8"),o=a,l=r(s.a,i.a,!1,o,null,null);t.a=l.exports},mRJh:function(e,t,n){"use strict";var a=n("Dd8w"),s=n.n(a),i=n("bWmM"),r=n("HpzI"),o=n.n(r),l=n("NYxO");t.a={name:"Autocomplete",components:{"v-autocomplete":o.a},props:{value:{required:!0}},data:function(){return{item:this.value,linesAutocomplete:[],template:i.a}},watch:{value:function(e){this.item=e}},computed:s()({},Object(l.b)(["fuse"])),methods:{itemSelected:function(e){this.$emit("update",e)},getLabel:function(e){return e.name+" "+e.directions},updateAutocomplete:function(e){this.linesAutocomplete=this.fuse.search(e).slice(0,15)}}}},oUcO:function(e,t,n){"use strict";var a=n("Dd8w"),s=n.n(a),i=n("lbUa"),r=n("GDE4"),o=n.n(r),l=n("M4fF"),u=n.n(l),c=n("lqen"),d=n("NYxO");t.a={name:"Editable",components:{autocomplete:i.a,"vue-slider":o.a,switches:c.a},props:{ligne:{required:!0},days:{required:!0},interval:{required:!0},index:{required:!0}},data:function(){return{daysCopy:u.a.values(this.days),intervalCopy:this.interval,ligneCopy:this.ligne}},watch:{ligne:function(e){this.ligneCopy=e},days:function(e){this.daysCopy=u.a.values(e)},interval:function(e){this.intervalCopy=e}},methods:s()({},Object(d.c)({rm:"remove",dup:"duplicate"}),{updateStore:function(e,t,n,a){e=this.daysObject(e),this.$store.commit("updateStore",{days:e,interval:t,ligne:n,index:a})},updated:function(e){this.ligneCopy=e},daysObject:function(e){return{lun:e[0],mar:e[1],mer:e[2],jeu:e[3],ven:e[4],sam:e[5],dim:e[6]}},remove:function(){this.rm({index:this.index})}}),computed:s()({},Object(d.b)(["intervals","itemByIndex"]),{isValid:function(){return 0!==this.ligneCopy.id&&this.daysCopy.some(function(e){return e})},saved:function(){var e=this.itemByIndex(this.index);return u.a.isEqual(u.a.valuesIn(this.daysCopy),u.a.valuesIn(e.days))&&u.a.isEqual(this.intervalCopy,e.interval)&&u.a.isEqual(this.ligneCopy.id,e.ligne.id)},everyDay:{get:function(){return u.a.values(this.daysCopy).reduce(function(e,t){return t&&e},!0)},set:function(e){this.daysCopy=u.a.map(this.daysCopy,function(t){return e})}},exceptWeekEnd:{get:function(){return u.a.take(u.a.values(this.daysCopy),5).reduce(function(e,t){return t&&e},!0)},set:function(e){this.daysCopy=u.a.map(this.daysCopy,function(t,n){return 5===n||6===n?t:e})}}})}},tqlH:function(e,t,n){"use strict";var a=n("XE79"),s=n("VU/8"),i=s(null,a.a,!1,null,null,null);t.a=i.exports},wCnD:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("nav",{staticClass:"navbar navbar-inverse navbar-fixed-top"},[n("div",{staticClass:"container"},[n("a",{staticClass:"navbar-brand",attrs:{href:"/"}},[e._v("Notifieur")]),e._v(" "),n("ul",{staticClass:"nav navbar-nav navbar-right"},[n("li",[n("router-link",{attrs:{to:"/"}},[e._v("Accueil")])],1),e._v(" "),n("li",[n("router-link",{attrs:{to:"/notification"}},[e._v("Notifications")])],1)])])]),e._v(" "),n("router-view")],1)},s=[],i={render:a,staticRenderFns:s};t.a=i},wQ0S:function(e,t,n){"use strict";var a=n("Dd8w"),s=n.n(a),i=n("Ku90"),r=n("NYxO");t.a={name:"edit",components:{editable:i.a},methods:s()({},Object(r.c)({newItem:"addNewItem"})),computed:s()({},Object(r.b)(["server"]))}},xJD8:function(e,t,n){"use strict";var a=n("Dd8w"),s=n.n(a),i=n("BDm9"),r=n.n(i),o=n("NYxO");t.a={name:"app",mounted:function(){var e=this;this.$http.get("lines").then(function(t){var n={shouldSort:!0,tokenize:!0,keys:[{name:"directions",weight:.2},{name:"name",weight:.8}]},a=t.body.result,s=[];for(var i in a)!function(e){a[e].forEach(function(t){t.type=e,s.push(t)})}(i);e.setLines(s),e.setFuse(new r.a(s,n))})},methods:s()({},Object(o.c)(["setFuse","setLines"]))}}},["NHnr"]);
//# sourceMappingURL=app.289300d8e35a1b572d37.js.map